import{u as R,a as A,_ as D,b as S}from"./index-C7Ghp4oT.js";import{b as k,r as y,c as C,w as E,o as x,a as B,i as T,f as W,k as w,n as L}from"./vendor-0GlxLSpO.js";import"./gsap-C8pce-KX.js";import"./d3-0W-Q7ZAI.js";const F={class:"weather-canvas-container"},H=k({__name:"WeatherCanvas",setup(I){const u=y(null),f=y(!1),_=R(),b=A();let p=null,c=null,i=null,s=null,o=null,a=null;const m=C(()=>_.weatherType),z={clear:{count:50,speed:.5,color:"#ffd700",size:.02},cloudy:{count:100,speed:.3,color:"#9ca3af",size:.03},rain:{count:500,speed:3,color:"#60a5fa",size:.01},storm:{count:800,speed:5,color:"#4b5563",size:.01},snow:{count:300,speed:.5,color:"#ffffff",size:.02},fog:{count:200,speed:.1,color:"#d1d5db",size:.05}},M=async()=>{if(!u.value)return;a=await D(()=>import("./three-BX2Vlr8r.js"),[]);const e=window.innerWidth,n=window.innerHeight;c=new a.Scene,i=new a.PerspectiveCamera(75,e/n,.1,1e3),i.position.z=5,s=new a.WebGLRenderer({canvas:u.value,alpha:!0,antialias:!0}),s.setSize(e,n),s.setPixelRatio(Math.min(window.devicePixelRatio,2)),v(m.value),f.value=!0,h()},v=e=>{if(!a||!c)return;o&&(c.remove(o),o.geometry.dispose(),o.material.dispose());const n=z[e],r=new a.BufferGeometry,t=new Float32Array(n.count*3),l=new Float32Array(n.count);for(let d=0;d<n.count;d++)t[d*3]=(Math.random()-.5)*20,t[d*3+1]=(Math.random()-.5)*20,t[d*3+2]=(Math.random()-.5)*10,l[d]=.5+Math.random()*.5;r.setAttribute("position",new a.BufferAttribute(t,3)),r.userData.velocities=l,r.userData.config=n;const P=new a.PointsMaterial({color:new a.Color(n.color),size:n.size,transparent:!0,opacity:.6,blending:a.AdditiveBlending});o=new a.Points(r,P),c.add(o)},h=()=>{if(!s||!c||!i||!o)return;p=requestAnimationFrame(h);const e=o.geometry.attributes.position.array,n=o.geometry.userData.velocities,r=o.geometry.userData.config;for(let t=0;t<e.length/3;t++){const l=m.value;l==="rain"||l==="storm"?(e[t*3+1]-=n[t]*r.speed*.05,e[t*3+1]<-10&&(e[t*3+1]=10,e[t*3]=(Math.random()-.5)*20)):l==="snow"?(e[t*3+1]-=n[t]*r.speed*.02,e[t*3]+=Math.sin(Date.now()*.001+t)*.01,e[t*3+1]<-10&&(e[t*3+1]=10,e[t*3]=(Math.random()-.5)*20)):(e[t*3]+=Math.sin(Date.now()*5e-4+t*.1)*.002,e[t*3+1]+=Math.cos(Date.now()*3e-4+t*.1)*.002)}o.geometry.attributes.position.needsUpdate=!0,o.rotation.y+=2e-4,s.render(c,i)},g=()=>{if(!i||!s)return;const e=window.innerWidth,n=window.innerHeight;i.aspect=e/n,i.updateProjectionMatrix(),s.setSize(e,n)};return E(m,e=>{f.value&&v(e)}),x(()=>{b.prefersReducedMotion||(M(),window.addEventListener("resize",g))}),B(()=>{p&&cancelAnimationFrame(p),s&&s.dispose(),window.removeEventListener("resize",g)}),(e,n)=>(W(),T("div",F,[n[0]||(n[0]=w("div",{class:"gradient-bg absolute inset-0 transition-colors duration-1000",style:{background:"linear-gradient(180deg, var(--sky-start), var(--sky-end))"}},null,-1)),w("canvas",{ref_key:"canvasRef",ref:u,class:L(["absolute inset-0",{"opacity-0":!f.value}])},null,2),n[1]||(n[1]=w("div",{class:"noise-overlay absolute inset-0 pointer-events-none"},null,-1))]))}}),q=S(H,[["__scopeId","data-v-0c7f7d36"]]);export{q as default};
